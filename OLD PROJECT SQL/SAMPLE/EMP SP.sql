MYSQL DATABASE ERROR: CANNOT ADD OR UPDATE A CHILD ROW: A FOREIGN KEY CONSTRAINT FAILS
 (`TEST_DESTINATION_31032014`.`EXPENSE_CARPARK`, CONSTRAINT `EXPENSE_CARPARK_IBFK_1` FOREIGN KEY (`EDCP_ID`) REFERENCES `EXPENSE_DETAIL_CAR_PARK` (`EDCP_ID`))

CREATE TABLE `EXPENSE_CARPARK` (
  `ECP_PARK_ID` INT(11) NOT NULL AUTO_INCREMENT,
  `EDCP_ID` INT(11) NOT NULL,
  `ECP_INVOICE_DATE` DATE NOT NULL,
  `ECP_FROM_PERIOD` DATE NOT NULL,
  `ECP_TO_PERIOD` DATE NOT NULL,
  `ECP_AMOUNT` DECIMAL(7,2) NOT NULL,
  `ECP_COMMENTS` TEXT,
  `ULD_ID` INT(2) NOT NULL,
  `ECP_TIMESTAMP` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`ECP_PARK_ID`),
  KEY `EDCP_ID` (`EDCP_ID`),
  KEY `ULD_ID` (`ULD_ID`),
  CONSTRAINT `EXPENSE_CARPARK_IBFK_1` FOREIGN KEY (`EDCP_ID`) REFERENCES `EXPENSE_DETAIL_CAR_PARK` (`EDCP_ID`),
  CONSTRAINT `EXPENSE_CARPARK_IBFK_2` FOREIGN KEY (`ULD_ID`) REFERENCES `USER_LOGIN_DETAILS` (`ULD_ID`)
) ENGINE=INNODB AUTO_INCREMENT=17 DEFAULT CHARSET=LATIN1;

ALTER TABLE `EXPENSE_CARPARK` DROP FOREIGN KEY `EXPENSE_CARPARK_IBFK_1`;

ALTER TABLE `EXPENSE_CARPARK` ADD CONSTRAINT `EXPENSE_CARPARK_IBFK_1` FOREIGN KEY ('EDCP_ID') REFERENCES `EXPENSE_DETAIL_CAR_PARK` ('EDCP_ID') 

CREATE TABLE `EXPENSE_DETAIL_CARPARK` (
  `EDCP_ID` INT(11) NOT NULL AUTO_INCREMENT,
  `UNIT_ID` INT(11) NOT NULL,
  `EDCP_REC_VER` INT(11) NOT NULL,
  `EDCP_CAR_NO` VARCHAR(9) NOT NULL,
  `EDCP_COMMENTS` TEXT,
  `ULD_ID` INT(2) NOT NULL,
  `EDCP_TIMESTAMP` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`EDCP_ID`),
  KEY `UNIT_ID` (`UNIT_ID`),
  KEY `ULD_ID` (`ULD_ID`),
  CONSTRAINT `EXPENSE_DETAIL_CARPARK_IBFK_1` FOREIGN KEY (`UNIT_ID`) REFERENCES `UNIT` (`UNIT_ID`),
  CONSTRAINT `EXPENSE_DETAIL_CARPARK_IBFK_2` FOREIGN KEY (`ULD_ID`) REFERENCES `USER_LOGIN_DETAILS` (`ULD_ID`)
) ENGINE=INNODB AUTO_INCREMENT=7 DEFAULT CHARSET=LATIN1;


-- SAMPLE SP 

DROP PROCEDURE IF EXISTS EMPLOYEE_CREATE;
CREATE PROCEDURE EMPLOYEE_CREATE()
BEGIN
DROP TABLE IF EXISTS EMPLOYEE;
CREATE TABLE EMPLOYEE(ID INTEGER NOT NULL AUTO_INCREMENT, EMP_ID INTEGER NOT NULL, NAME CHAR(20), EMAIL VARCHAR(50), MOBILE_NO INTEGER(10), COMMENTS TEXT, PRIMARY KEY (ID));
END;

CALL EMPLOYEE_CREATE
SELECT * FROM EMPLOYEE;

DROP PROCEDURE IF EXISTS EMPLOYEEINSERT;
CREATE PROCEDURE EMPLOYEEINSERT(IN EID INTEGER,IN ENAME CHAR(20),IN EML VARCHAR(50),IN MNO INTEGER,IN CMT TEXT,OUT FLAG INTEGER)
BEGIN
SET FLAG=0;
INSERT INTO EMPLOYEE(EMP_ID,NAME,EMAIL,MOBILE_NO,COMMENTS) VALUES(EID,ENAME,EML,MNO,CMT);
SET FLAG=1;
END;

SELECT * FROM EMPLOYEE
CALL EMPLOYEEINSERT(101,'SASIKALA','DSASIKALA58@GMAIL.COM',9994306684,'GOOD',@FLAG)

CALL EMPLOYEEINSERT(102,'SANDIYA','SANDIYA@GMAIL.COM',8606917105,'BAD',@FLAG)
SELECT @FLAG;

DROP PROCEDURE IF EXISTS EMPLOYEEUPDATE;
CREATE PROCEDURE EMPLOYEEUPDATE(OUT FLAG INTEGER)
BEGIN
SET FLAG=0;
UPDATE EMPLOYEE SET EMP_ID=103,NAME='MANI',EMAIL='MANI@GMAIL.COM',MOBILE_NO=9994306684,COMMENTS='GOOD' WHERE ID=2;
SET FLAG=1;
END;

CALL EMPLOYEEUPDATE( @FLAG)

SELECT @FLAG

DROP PROCEDURE IF EXISTS EMPLOYEEDELETE;
CREATE PROCEDURE EMPLOYEEDELETE(OUT FLAG INTEGER)
BEGIN
SET FLAG=0;
DELETE FROM EMPLOYEE WHERE ID=1;
SET FLAG=1;
END;

CALL EMPLOYEEDELETE(@FLAG)

SELECT @FLAG



