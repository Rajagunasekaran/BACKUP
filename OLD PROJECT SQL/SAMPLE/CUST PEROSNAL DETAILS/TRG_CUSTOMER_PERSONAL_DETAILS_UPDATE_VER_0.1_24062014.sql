-- VERSION 0.6 STARTDATE:25/06/2014 ENDDATE:25/06/2014 DESC: CHECK CONSTRAINS FOR THE EP_DATE AND PASSPORT_DATE IN THE CUSTOMER PERSONAL DETAILS. DONE BY :RAJA
-- TRIGGER FOR BEFORE UPDATE PRETERMINATION AND ENDDATE

DROP TRIGGER IF EXISTS TRG_CUSTOMER_PERSONAL_DETAILS_UPDATE;
CREATE TRIGGER TRG_CUSTOMER_PERSONAL_DETAILS_UPDATE
BEFORE UPDATE ON CUSTOMER_PERSONAL_DETAILS
FOR EACH ROW
BEGIN
    CALL SP_TRG_CUSTOMER_PERSONAL_DETAILS(NEW.CUSTOMER_ID,NEW.NC_ID,NEW.CPD_EP_DATE,NEW.CPD_PASSPORT_DATE,'UPDATE');
END;